<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="my random blabbing"><title>running elasticsearch on a 2gb digital ocean droplet - intimacy of my thoughts</title><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=/css/main.min.670da4c21f08f6fb9346ba65b362026a143c88c6d6e4292b05476774b0516a42.css integrity="sha256-Zw2kwh8I9vuTRrpls2ICahQ8iMbW5CkrBUdndLBRakI=" crossorigin=anonymous media=screen><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Didact+Gothic"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://zkanda.io/tn.png"><meta name=twitter:title content="running elasticsearch on a 2gb digital ocean droplet"><meta name=twitter:description content="So I want to run Elasticsearch on a very limited memory machine and I keep running on this error: cannot allocate memory.
Did some research and found this docs on increasing max_map_count:
echo &#34;vm.max_map_count=262144&#34; | sudo tee -a /etc/sysctl.conf sudo sysctl -w vm.max_map_count=262144 But the problem still persists, turns out memory still actually still not enough. I want don&rsquo;t to upgrade the memory since I just want to test things out and I have no plan on running it on production."><meta property="og:title" content="running elasticsearch on a 2gb digital ocean droplet"><meta property="og:description" content="So I want to run Elasticsearch on a very limited memory machine and I keep running on this error: cannot allocate memory.
Did some research and found this docs on increasing max_map_count:
echo &#34;vm.max_map_count=262144&#34; | sudo tee -a /etc/sysctl.conf sudo sysctl -w vm.max_map_count=262144 But the problem still persists, turns out memory still actually still not enough. I want don&rsquo;t to upgrade the memory since I just want to test things out and I have no plan on running it on production."><meta property="og:type" content="article"><meta property="og:url" content="https://zkanda.io/dev/running-elasticsearch-on-a-2gb-digital-ocean-droplet/"><meta property="og:image" content="https://zkanda.io/tn.png"><meta property="article:published_time" content="2017-07-03T05:46:21+00:00"><meta property="article:modified_time" content="2017-07-03T05:46:21+00:00"><meta property="og:site_name" content="intimacy of my thoughts"><title>running elasticsearch on a 2gb digital ocean droplet</title></head><body><header class="wrap flex-container"><h1>running elasticsearch on a 2gb digital ocean droplet</h1></header><main class=wrap><div class=flex-container><aside role=complementary>Mon Jul 03, 2017 &#183; 135 words<div class=tag-container><span class=tag><a href=/tags/technology/>technology</a></span>
<span class=tag><a href=/tags/elasticsearch/>elasticsearch</a></span>
<span class=tag><a href=/tags/linux/>linux</a></span></div></aside><hr><article role=article><p>So I want to run <a href=https://www.elastic.co/products/elasticsearch>Elasticsearch</a> on a very limited memory machine and I keep running on this error: <code>cannot allocate memory</code>.</p><p>Did some research and found this <a href=https://www.elastic.co/guide/en/elasticsearch/reference/current/vm-max-map-count.html>docs</a> on increasing <code>max_map_count</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>echo <span style=color:#e6db74>&#34;vm.max_map_count=262144&#34;</span> | sudo tee -a /etc/sysctl.conf
sudo sysctl -w vm.max_map_count<span style=color:#f92672>=</span><span style=color:#ae81ff>262144</span>
</code></pre></div><p>But the problem still persists, turns out memory still actually still not enough. I want don&rsquo;t to upgrade the memory since I just want to test things out and I have no plan on running it on production.</p><p>Swap memory to the rescue.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>fallocate -l 2G /swapfile
chmod <span style=color:#ae81ff>600</span> /swapfile
mkswap /swapfile
swapon /swapfile
echo <span style=color:#e6db74>&#39;/swapfile none swap sw 0 0&#39;</span> | sudo tee -a /etc/fstab
</code></pre></div><p>Run your elasticsearch and it should now be good.</p><p>Small Rant: I don&rsquo;t get why we need more than 2GB of memory to just test ES.</p></article></div><nav role=navigation class="flex-container bottom-menu"><hr><p><a href=/dev>back</a>
&#183;
<a href=/posts>posts</a>
&#183;
<a href=/gallery>gallery</a>
&#183;
<a href=/about>who is zak?</a>
&#183;
<a href=/dev>dev</a>
&#183;
<a href=/>main</a></p></nav></main><footer class="flex-container footer">You only live once, smile and make it count.</footer></body></html>