<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="my random blabbing"><title>our experience in resizing an ebs volume in ec2 instances. - intimacy of my thoughts</title><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=/css/main.min.670da4c21f08f6fb9346ba65b362026a143c88c6d6e4292b05476774b0516a42.css integrity="sha256-Zw2kwh8I9vuTRrpls2ICahQ8iMbW5CkrBUdndLBRakI=" crossorigin=anonymous media=screen><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Didact+Gothic"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://zkanda.io/tn.png"><meta name=twitter:title content="our experience in resizing an ebs volume in ec2 instances."><meta name=twitter:description content="Increasing disk space without downtime.
So in our team, we had to resize an instance disk because it&rsquo;s getting full, this is our experience.
For the first time we search on how to do this, there are many articles written about it and most of them require to stop the system and detaching a volume. But there must be a real doc from aws itself, that is most likely up to date."><meta property="og:title" content="our experience in resizing an ebs volume in ec2 instances."><meta property="og:description" content="Increasing disk space without downtime.
So in our team, we had to resize an instance disk because it&rsquo;s getting full, this is our experience.
For the first time we search on how to do this, there are many articles written about it and most of them require to stop the system and detaching a volume. But there must be a real doc from aws itself, that is most likely up to date."><meta property="og:type" content="article"><meta property="og:url" content="https://zkanda.io/dev/experience-in-resizing-an-ebs-volume-in-ec2-instances/"><meta property="og:image" content="https://zkanda.io/tn.png"><meta property="article:published_time" content="2018-03-19T22:55:57+00:00"><meta property="article:modified_time" content="2018-03-19T22:55:57+00:00"><meta property="og:site_name" content="intimacy of my thoughts"><title>our experience in resizing an ebs volume in ec2 instances.</title></head><body><header class="wrap flex-container"><h1>our experience in resizing an ebs volume in ec2 instances.</h1></header><main class=wrap><article role=article class=flex-container><p>Increasing disk space without downtime.</p><p>So in our team, we had to resize an instance disk because it&rsquo;s getting full, this is our experience.</p><p>For the first time we search on how to do this, there are many articles written about it and most of them require to stop the system and detaching a volume. But there must be a real doc from aws itself, that is most likely up to date.</p><p>After more searching, we found this link: <a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-modify-volume.html>https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-modify-volume.html</a></p><p>From there, it seems like we can modify it on the fly since our instance is the current generation, so that&rsquo;s good news.</p><p>Since we mount the whole volume, we didn&rsquo;t need to extend a partition table. You only have to use the <code>resize</code> command.</p><p>The list of block devices attached to our instance:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ lsblk -f
NAME    FSTYPE LABEL           UUID                                 MOUNTPOINT
xvda
└─xvda1 ext4   cloudimg-rootfs b6adc449-5e3d-4331-ba6b-xxxx /
xvdb    ext4                   85a58c7a-d914-4b85-be3c-xxxx /opt/
</code></pre></div><p>And here&rsquo;s the resize command.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ sudo resize2fs /dev/xvdb
resize2fs 1.42.13 <span style=color:#f92672>(</span>17-May-2015<span style=color:#f92672>)</span>
Filesystem at /dev/xvdb is mounted on /opt/couchdb; on-line resizing required
old_desc_blocks <span style=color:#f92672>=</span> 4, new_desc_blocks <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>
The filesystem on /dev/xvdb is now <span style=color:#ae81ff>39321600</span> <span style=color:#f92672>(</span>4k<span style=color:#f92672>)</span> blocks long.
</code></pre></div><p>This was a very nice and smooth experience and we are glad for this functionality, thank you AWS team and whoever made this possible.</p></article><nav role=navigation class="flex-container bottom-menu"><hr><p><a href=/posts>posts</a>
&#183;
<a href=/gallery>gallery</a>
&#183;
<a href=/about>who is zak?</a>
&#183;
<a href=/dev>dev</a>
&#183;
<a href=/>main</a></p></nav></main><footer class="flex-container footer">You only live once, smile and make it count.</footer></body></html>