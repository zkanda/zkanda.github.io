<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="my random blabbing"><title>installing prometheus in k8s cluster with helm - intimacy of my thoughts</title><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=/css/main.min.670da4c21f08f6fb9346ba65b362026a143c88c6d6e4292b05476774b0516a42.css integrity="sha256-Zw2kwh8I9vuTRrpls2ICahQ8iMbW5CkrBUdndLBRakI=" crossorigin=anonymous media=screen><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Didact+Gothic"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://zkanda.io/tn.png"><meta name=twitter:title content="installing prometheus in k8s cluster with helm"><meta name=twitter:description content="Prerequisite: A cluster with RBAC enabled. Have enough capacity in the cluster Install Helm:
kubectl create serviceaccount tiller --namespace kube-system kubectl create clusterrolebinding tiller-rb --clusterrole=cluster-admin --serviceaccount=kube-system:tiller helm init --service-account tiller Get the values.yaml from here Edit some things that you want to tweak, for us, we change the CPU limit to a lower value. Then just install Prometheus:
helm install -f values.yaml --name prometheus stable/prometheus Ideally, this should be installed in another namespace but we will keep it simple for now."><meta property="og:title" content="installing prometheus in k8s cluster with helm"><meta property="og:description" content="Prerequisite: A cluster with RBAC enabled. Have enough capacity in the cluster Install Helm:
kubectl create serviceaccount tiller --namespace kube-system kubectl create clusterrolebinding tiller-rb --clusterrole=cluster-admin --serviceaccount=kube-system:tiller helm init --service-account tiller Get the values.yaml from here Edit some things that you want to tweak, for us, we change the CPU limit to a lower value. Then just install Prometheus:
helm install -f values.yaml --name prometheus stable/prometheus Ideally, this should be installed in another namespace but we will keep it simple for now."><meta property="og:type" content="article"><meta property="og:url" content="https://zkanda.io/dev/installing-prometheus-in-k8s-cluster-with-helm/"><meta property="og:image" content="https://zkanda.io/tn.png"><meta property="article:published_time" content="2018-09-04T04:10:21+00:00"><meta property="article:modified_time" content="2018-09-04T04:10:21+00:00"><meta property="og:site_name" content="intimacy of my thoughts"><title>installing prometheus in k8s cluster with helm</title></head><body><header class="wrap flex-container"><h1>installing prometheus in k8s cluster with helm</h1></header><main class=wrap><article role=article class=flex-container><p>Prerequisite:
A cluster with RBAC enabled.
Have enough capacity in the cluster
Install Helm:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>kubectl create serviceaccount tiller --namespace kube-system
kubectl create clusterrolebinding tiller-rb --clusterrole<span style=color:#f92672>=</span>cluster-admin --serviceaccount<span style=color:#f92672>=</span>kube-system:tiller
helm init --service-account tiller
</code></pre></div><p>Get the values.yaml from <a href=https://github.com/helm/charts/blob/master/stable/prometheus/values.yaml>here</a>
Edit some things that you want to tweak, for us, we change the CPU limit to a lower value.
Then just install Prometheus:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>helm install -f values.yaml --name prometheus stable/prometheus
</code></pre></div><p>Ideally, this should be installed in another namespace but we will keep it simple for now. After the installation you will have this new pods running in your default workspace:</p><ul><li>alertmanager</li><li>kube-state-metrics</li><li>node-exporter</li><li>pushgateway</li><li>prometheus-server</li></ul><p>The server will automatically discover your cluster and you will have a whole bunch of metrics available, it can be overwhelming so don&rsquo;t pay attention too much about it.</p><p>In the next post: We will configure alertmanager to send alerts for basic things like CPU, Memory and Disk usage. At least this is our initial goal why we want to use Prometheus.</p></article><nav role=navigation class="flex-container bottom-menu"><hr><p><a href=/posts>posts</a>
&#183;
<a href=/gallery>gallery</a>
&#183;
<a href=/about>who is zak?</a>
&#183;
<a href=/dev>dev</a>
&#183;
<a href=/>main</a></p></nav></main><footer class="flex-container footer">You only live once, smile and make it count.</footer></body></html>